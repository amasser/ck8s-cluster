apiVersion: v1
kind: Pod
metadata:
  name: sync-buckets
  labels:
    app: sync-buckets
spec:
  restartPolicy: Never     
  tolerations:
  - key: "nodeType"
    operator: "Equal"
    value: "elastisys"
    effect: "NoSchedule"    
  volumes:
  - name: rclone-config
    secret:
      secretName: rclone-config
  containers:
  - name: rclone
    image: elastisys/rclone-sync:1.0.0
    env:
    - name: BUCKETS_TO_SYNC
      value: "psql-tempus-safespring-ck8s influxdb-tempus-safespring-ck8s elasticsearch-tempus-safespring-ck8s velero-tempus-safespring-ck8s"
    - name: REMOTE_SRC
      value: "safespring-sto2"
    - name: REMOTE_DST
      value: "safespring-osl1"
    - name: EXTRA_ARGS
      value: "--progress"
    volumeMounts:
    - name: rclone-config
      mountPath: /root/.config/rclone/
    resources:
      requests:
        cpu: 50m
        memory: 100Mi
      limits:
        cpu: 2000m
        memory: 4000Mi
